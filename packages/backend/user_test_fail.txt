
> backend@0.0.1 test:blackbox
> cross-env DB_HOST=${DB_HOST:-127.0.0.1} jest --config ./test/jest-blackbox.json --runInBand test/blackbox/user.blackbox-test.ts

  console.log
    [90m[4mquery:[24m[39m [94mSELECT[0m [95mversion[0m[37m([0m[37m)[0m

      at Function.logInfo (../../../node_modules/.pnpm/typeorm@0.3.28_mysql2@3.16.0_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/src/platform/PlatformTools.ts:262:17)

  console.log
    [90m[4mquery:[24m[39m [94mSELECT[0m [37m`User`[0m[37m.[0m[37m`user_id`[0m [94mAS[0m [37m`User_user_id`[0m[37m,[0m [37m`User`[0m[37m.[0m[37m`user_email`[0m [94mAS[0m [37m`User_user_email`[0m[37m,[0m [37m`User`[0m[37m.[0m[37m`sub`[0m [94mAS[0m [37m`User_sub`[0m[37m,[0m [37m`User`[0m[37m.[0m[37m`role`[0m [94mAS[0m [37m`User_role`[0m[37m,[0m [37m`User`[0m[37m.[0m[37m`profile_url`[0m [94mAS[0m [37m`User_profile_url`[0m[37m,[0m [37m`User`[0m[37m.[0m[37m`created_at`[0m [94mAS[0m [37m`User_created_at`[0m[37m,[0m [37m`User`[0m[37m.[0m[37m`modified_at`[0m [94mAS[0m [37m`User_modified_at`[0m [94mFROM[0m [37m`users`[0m [37m`User`[0m [94mWHERE[0m [37m([0m[37m([0m[37m`User`[0m[37m.[0m[37m`sub`[0m [37m=[0m [37m?[0m[37m)[0m[37m)[0m [94mLIMIT[0m [32m1[0m [90m-- PARAMETERS: ["user_blackbox_user_sub"][0m

      at Function.logInfo (../../../node_modules/.pnpm/typeorm@0.3.28_mysql2@3.16.0_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/src/platform/PlatformTools.ts:262:17)

FAIL test/blackbox/user.blackbox-test.ts
  User (Blackbox)
    ‚úï 1. ÎÇ¥ Ï†ïÎ≥¥ Ï°∞Ìöå (GET /user/my-page) (4 ms)
    ‚úï 2. Î°úÍ∑∏ÏïÑÏõÉ (GET /user/logout) (4 ms)

  ‚óè User (Blackbox) ‚Ä∫ 1. ÎÇ¥ Ï†ïÎ≥¥ Ï°∞Ìöå (GET /user/my-page)

    expected 200 "OK", got 404 "Not Found"

      52 |       .get('/user/my-page')
      53 |       .set('Authorization', `Bearer ${accessToken}`)
    > 54 |       .expect(200);
         |        ^
      55 |
      56 |     expect(response.body).toHaveProperty('id');
      57 |     expect(response.body).toHaveProperty('email', 'user_blackbox_user@example.com');

      at Object.<anonymous> (blackbox/user.blackbox-test.ts:54:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at ../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ‚óè User (Blackbox) ‚Ä∫ 2. Î°úÍ∑∏ÏïÑÏõÉ (GET /user/logout)

    expected 200 "OK", got 404 "Not Found"

      63 |       .get('/user/logout')
      64 |       .set('Authorization', `Bearer ${accessToken}`)
    > 65 |       .expect(200);
         |        ^
      66 |
      67 |     // Ïø†ÌÇ§ ÏÇ≠Ï†ú ÌôïÏù∏
      68 |     const cookies = response.headers['set-cookie'] as unknown as string[];

      at Object.<anonymous> (blackbox/user.blackbox-test.ts:65:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at ../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        0.852 s, estimated 1 s
Ran all test suites matching test/blackbox/user.blackbox-test.ts.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
