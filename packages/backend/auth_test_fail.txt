
> backend@0.0.1 test:blackbox
> cross-env DB_HOST=${DB_HOST:-127.0.0.1} jest --config ./test/jest-blackbox.json --runInBand test/blackbox/auth.blackbox-test.ts

  console.log
    [90m[4mquery:[24m[39m [94mSELECT[0m [95mversion[0m[37m([0m[37m)[0m

      at Function.logInfo (../../../node_modules/.pnpm/typeorm@0.3.28_mysql2@3.16.0_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/src/platform/PlatformTools.ts:262:17)

[31m[Nest] 5055  - [39m01/29/2026, 3:57:24 PM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39mTypeError: this.googleOAuthService.exchangeCodeForToken is not a function
    at AuthService.googleLogin [90m(/Users/imjanghyeog/Desktop/membership/web23-boostcamp/packages/backend/[39msrc/auth/auth.service.ts:20:37[90m)[39m
    at AuthController.signup [90m(/Users/imjanghyeog/Desktop/membership/web23-boostcamp/packages/backend/[39msrc/auth/auth.controller.ts:30:35[90m)[39m
    at /Users/imjanghyeog/Desktop/membership/web23-boostcamp/node_modules/[4m.pnpm[24m/@nestjs+core@11.1.9_@nestjs+common@11.1.9_class-transformer@0.5.1_class-validator@0.14._35aa21069415c61cc2ff03470cea104c/node_modules/[4m@nestjs[24m/core/router/router-execution-context.js:38:29
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at /Users/imjanghyeog/Desktop/membership/web23-boostcamp/node_modules/[4m.pnpm[24m/@nestjs+core@11.1.9_@nestjs+common@11.1.9_class-transformer@0.5.1_class-validator@0.14._35aa21069415c61cc2ff03470cea104c/node_modules/[4m@nestjs[24m/core/router/router-execution-context.js:46:28
    at /Users/imjanghyeog/Desktop/membership/web23-boostcamp/node_modules/[4m.pnpm[24m/@nestjs+core@11.1.9_@nestjs+common@11.1.9_class-transformer@0.5.1_class-validator@0.14._35aa21069415c61cc2ff03470cea104c/node_modules/[4m@nestjs[24m/core/router/router-proxy.js:9:17
[31m[Nest] 5055  - [39m01/29/2026, 3:57:24 PM [31m  ERROR[39m [38;5;3m[HTTP] [39m[31mGET /auth/signup/oauth?code=mock_auth_code 500 - ::ffff:127.0.0.1 -  +3ms[39m
FAIL test/blackbox/auth.blackbox-test.ts
  Auth (Blackbox)
    âœ“ 1. Google Login URL ìš”ì²­ (GET /auth/login/url/google) (13 ms)
    âœ• 2. Google OAuth íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ (GET /auth/signup/oauth) (5 ms)

  â— Auth (Blackbox) â€º 2. Google OAuth íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ (GET /auth/signup/oauth)

    expected 200 "OK", got 500 "Internal Server Error"

      54 |       .get('/auth/signup/oauth')
      55 |       .query({ code: 'mock_auth_code' })
    > 56 |       .expect(200);
         |        ^
      57 |
      58 |     // Cookieì— accessToken, refreshTokenì´ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
      59 |     const cookies = response.headers['set-cookie'] as unknown as string[];

      at Object.<anonymous> (blackbox/auth.blackbox-test.ts:56:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at ../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../../../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 passed, 2 total
Snapshots:   0 total
Time:        0.855 s, estimated 1 s
Ran all test suites matching test/blackbox/auth.blackbox-test.ts.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
